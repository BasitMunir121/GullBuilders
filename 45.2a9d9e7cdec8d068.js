"use strict";(self.webpackChunkSpike=self.webpackChunkSpike||[]).push([[45],{2045:(ei,F,d)=>{d.r(F),d.d(F,{PagesModule:()=>ti});var k=d(2787),u=d(6814),q=d(1256),h=d(9134),t=d(9212),m=d(5195);const G=(e,a)=>a.title;function $(e,a){if(1&e&&(t._UZ(0,"br"),t._uU(1)),2&e){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.subtextMore," ")}}function j(e,a){if(1&e&&(t.TgZ(0,"div",2)(1,"mat-card",3)(2,"mat-card-content")(3,"span"),t._UZ(4,"i-tabler",4),t.qZA(),t.TgZ(5,"h6",5),t._uU(6),t.qZA(),t.TgZ(7,"span",6),t._uU(8),t.YNc(9,$,2,1),t.qZA()()(),t._UZ(10,"br"),t.qZA()),2&e){const i=a.$implicit;t.xp6(3),t.Gre("icon-50 bg-light-",i.color," rounded d-flex align-items-center justify-content-center"),t.xp6(1),t.Gre("text-",i.color," icon-30"),t.Q6J("name",i.icon),t.xp6(2),t.hij(" ",i.title," "),t.xp6(2),t.hij("",i.subtext," "),t.xp6(1),t.um2(9,i.subtextMore?9:-1)}}let Y=(()=>{class e{constructor(){this.features=[{id:1,icon:"wand",title:"Live Auctions",color:"primary",subtext:"Buy and sell in real-time with our innovative auction system. Chat directly with buyers or sellers to negotiate prices and finalize deals."},{id:2,icon:"adjustments",title:"Transparent Product Listings",color:"accent",subtext:"Each product is assigned a unique QR code linked to detailed farmer profiles, certifications, & production methods."},{id:3,icon:"archive",title:"Educational Resources",color:"warning",subtext:"Access our knowledge hub filled guides, and FAQs on sustainable farming. Learn in your preferred language with region-specific insights."},{id:4,icon:"clock",title:"Real-Time Notifications",color:"error",subtext:"Stay ahead with push notifications for",subtextMore:"1:Crop advisories 2:Market updates 3:Weather forecasts."},{id:5,icon:"tag",title:"Feedback System ",color:"success",subtext:"Build trust with reviews. Farmers can review buyers, and buyers can leave feedback on products, creating a reliable marketplace."},{id:9,icon:"chart-pie",title:"Offline Functionality",color:"error",subtext:"No internet? No problem. View educational content and product listings offline. Your data syncs automatically when you\u2019re back online."}]}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-starter"]],standalone:!0,features:[t.jDz],decls:4,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-sm-6","col-lg-4"],[1,"cardWithShadow"],[3,"name"],[1,"m-0","f-s-18","f-w-600","m-b-8","m-t-24"],[1,"f-s-14","m-b-24","d-block","lh-base"],["class","col-sm-6 col-lg-4"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.SjG(2,j,11,10,"div",7,G),t.qZA()()),2&o&&(t.xp6(2),t.wJu(n.features))},dependencies:[q.q,m.a8,m.dn,h.et,h.bz],encapsulation:2})}return e})();var c=d(5313),T=d(1476),Z=d(3566),U=d(617),C=d(2596),A=d(5940),r=d(6223),g=d(9347),p=d(4170),v=d(2032),_=d(2296),x=d(7853),b=d(1474),V=d(6973),W=d(305),K=d(1126),tt=d(4553);let y=(()=>{class e{constructor(i,o){this.apiPrefix=i,this.dataHttp=o,this.session=new K.m,this.initDataService()}get(i,o){this.addRequestHeaders();let n=this.apiUrl+"/";if(this.apiPrefix&&(n+=this.apiPrefix+"/"),o&&(o.startsWith("~")?n=this.apiUrl+"/"+o.replace("~",""):n+=o),i){let s=new URLSearchParams;for(let l in i)s.set(l,i[l]);s&&(n+="?"+s.toString())}return this.dataHttp.get(n,this.httpOptions)}getAsPromise(i,o){this.addRequestHeaders();let n=this.apiUrl+"/";if(this.apiPrefix&&(n+=this.apiPrefix+"/"),o&&(o.startsWith("~")?n=this.apiUrl+"/"+o.replace("~",""):n+=o),i){let s=new URLSearchParams;for(let l in i)s.set(l,i[l]);s&&(n+="?"+s.toString())}return function X(e,a){const i="object"==typeof a;return new Promise((o,n)=>{const s=new W.Hp({next:l=>{o(l),s.unsubscribe()},error:n,complete:()=>{i?o(a.defaultValue):n(new V.K)}});e.subscribe(s)})}(this.dataHttp.get(n,this.httpOptions))}post(i,o){this.addRequestHeaders();let n=this.apiUrl+"/"+this.apiPrefix+"/";return o&&(o.startsWith("~")?n=this.apiUrl+"/"+o.replace("~",""):n+=o),console.log(this.dataHttp.post(n,JSON.stringify(i),this.httpOptions)),this.dataHttp.post(n,JSON.stringify(i),this.httpOptions)}put(i,o){this.addRequestHeaders();let n=this.apiUrl+"/"+this.apiPrefix+"/";return o&&(o.startsWith("~")?n=this.apiUrl+"/"+o.replace("~",""):n+=o),this.dataHttp.put(n,JSON.stringify(i),this.httpOptions)}delete(i){this.addRequestHeaders();let o=this.apiUrl+"/"+this.apiPrefix+"/",n=i+"";return n&&(n.startsWith("~")?o=this.apiUrl+"/"+n.replace("~",""):o+=n),this.dataHttp.delete(o,this.httpOptions)}deleteWithBody(i,o){this.addRequestHeaders();let n=this.apiUrl+"/"+this.apiPrefix+"/";return o&&(o.startsWith("~")?n=this.apiUrl+"/"+o.replace("~",""):n+=o),i&&(this.httpOptions.body=i),this.dataHttp.delete(n,this.httpOptions)}deleteWithParams(i,o){this.addRequestHeaders();let n=this.apiUrl+"/"+this.apiPrefix+"/";if(o&&(o.startsWith("~")?n=this.apiUrl+"/"+o.replace("~",""):n+=o),i){let s=new URLSearchParams;for(let l in i)s.set(l,i[l]);s&&(n+="?"+s.toString())}return this.dataHttp.delete(n,this.httpOptions)}addRequestHeaders(){this.initDataService();var i=this.session.getSessionItem(tt.Nc.AuthTokenKey);this.httpOptions=i?{headers:new b.WM({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+i.Token,rejectUnauthorized:"false",Language:"en"})}:{headers:new b.WM({"Content-Type":"application/json; charset=utf-8",rejectUnauthorized:"false"})}}initDataService(){this.apiUrl="http://192.168.0.87:9500"}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(String),t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),J=(()=>{class e extends y{constructor(i){super("user-notifications",i)}getAllNotification(){return this.get(null,"")}addNotification(i){return this.post(i)}updateNotification(i){return this.put(i,i.id.toString())}deleteNotification(i){return this.delete(i)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function et(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Title is required "),t.qZA())}function it(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Title cannot exceed 255 characters "),t.qZA())}function ot(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Content is required "),t.qZA())}let R=(()=>{class e{constructor(i,o,n,s,l){this.fb=i,this.dialogRef=o,this.authService=n,this.notificationService=s,this.data=l,this.currentUser=n.currentUserValue,this.notificationForm=this.fb.group({title:["",[r.kI.required,r.kI.maxLength(255)]],content:["",[r.kI.required]]})}ngOnInit(){this.notificationForm.patchValue(this.data)}submit(){if(this.notificationForm.valid){let i=this.notificationForm.value;this.adversery_Id&&this.adversery_Id>0?(i.id=this.adversery_Id,this.notificationService.updateNotification(i).subscribe(o=>{this.dialogRef.close(o)},o=>{})):(console.log("submit",this.currentUser.id),i.advisory_id=this.currentUser.id,this.notificationService.addNotification(i).subscribe(o=>{this.dialogRef.close(o)},o=>{}))}}close(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(g.so),t.Y36(x.e),t.Y36(J),t.Y36(g.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-notification"]],inputs:{adversery_Id:"adversery_Id"},standalone:!0,features:[t.jDz],decls:21,vars:6,consts:[["mat-dialog-title","",1,"f-w-500","m-b-24"],[3,"formGroup"],["mat-dialog-content","",1,"content"],["appearance","outline",1,"w-100"],["matInput","","formControlName","title","placeholder","Enter title"],[4,"ngIf"],["matInput","","formControlName","content","rows","5","placeholder","Enter content"],[1,"float-right"],["mat-flat-button","","mat-flat-button","","color","primary",3,"disabled","click"],["mat-stroked-button","","color","warn",1,"m-l-8",3,"click"]],template:function(o,n){if(1&o&&(t.TgZ(0,"h2",0)(1,"strong"),t._uU(2),t.qZA()(),t.TgZ(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Title"),t.qZA(),t._UZ(8,"input",4),t.YNc(9,et,2,0,"mat-error",5)(10,it,2,0,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Content"),t.qZA(),t._UZ(14,"textarea",6),t.YNc(15,ot,2,0,"mat-error",5),t.qZA(),t.TgZ(16,"div",7)(17,"button",8),t.NdJ("click",function(){return n.submit()}),t._uU(18," Save "),t.qZA(),t.TgZ(19,"button",9),t.NdJ("click",function(){return n.close()}),t._uU(20," Cancel "),t.qZA()()()()),2&o){let s,l,f;t.xp6(2),t.Oqu(n.data?"Edit Notification":"Add Notification"),t.xp6(1),t.Q6J("formGroup",n.notificationForm),t.xp6(6),t.Q6J("ngIf",null==(s=n.notificationForm.get("title"))?null:s.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(l=n.notificationForm.get("title"))?null:l.hasError("maxLength")),t.xp6(5),t.Q6J("ngIf",null==(f=n.notificationForm.get("content"))?null:f.hasError("required")),t.xp6(2),t.Q6J("disabled",!n.notificationForm.valid)}},dependencies:[r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.lN,p.KE,p.hX,p.TO,v.c,v.Nt,_.ot,_.lW,u.O5]})}return e})();function nt(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"mat-card-header")(1,"div",15)(2,"button",16),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.AddNotification())}),t._uU(3,"Add Notification"),t.qZA()()()}}function at(e,a){1&e&&(t.TgZ(0,"th",17),t._uU(1,"ID"),t.qZA())}function rt(e,a){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.id)}}function st(e,a){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Advisory ID"),t.qZA())}function ct(e,a){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.advisory_id)}}function lt(e,a){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Title"),t.qZA())}function dt(e,a){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.title)}}function ut(e,a){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Content"),t.qZA())}function mt(e,a){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.content)}}function pt(e,a){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Action"),t.qZA())}function ft(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"td",19)(1,"a",20),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.EditNotification(s))}),t._UZ(2,"i-tabler",21),t.qZA(),t.TgZ(3,"a",22),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.DeleteNotification(s))}),t._UZ(4,"i-tabler",23),t.qZA()()}}function _t(e,a){1&e&&t._UZ(0,"tr",24)}function ht(e,a){1&e&&t._UZ(0,"tr",25)}function gt(e,a){1&e&&(t.TgZ(0,"div",26),t._UZ(1,"mat-spinner"),t.qZA())}function Tt(e,a){1&e&&(t.TgZ(0,"tr",27)(1,"td",28),t._uU(2,"No data available."),t.qZA()())}const Zt=()=>[10,25,50];let Ct=(()=>{class e{constructor(i,o,n,s){this.authService=i,this.dialog=o,this.changeDetection=n,this.notificationService=s,this.displayedColumns=["advisory_id","title","content"],this.dataSource=[],this.totalRecords=0,this.loading=!1,this.notificationsData=[]}ngOnInit(){this.fetchTableData(),this.userDetails=this.authService.currentUserValue,this.userDetails.IsGovtAgency&&(this.displayedColumns=["advisory_id","title","content","action"])}fetchTableData(){this.loading=!0,this.notificationService.getAllNotification().subscribe(i=>{console.log(i),this.dataSource=i,i&&(this.totalRecords=i.length)})}AddNotification(){this.dialog.open(R,{width:"680px"}).afterClosed().subscribe({next:o=>{o&&this.fetchTableData()}})}EditNotification(i){console.log("EditNotification",i);const o=this.dialog.open(R,{data:i,width:"680px"});o.componentInstance.adversery_Id=i.id,o.afterClosed().subscribe({next:n=>{n&&this.fetchTableData()}})}DeleteNotification(i){confirm("Are you sure you want to delete this notification?")&&(console.log(i),this.notificationService.deleteNotification(i.id).subscribe(n=>{},n=>{}),this.fetchTableData())}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(x.e),t.Y36(g.uw),t.Y36(t.sBO),t.Y36(J))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-notifications"]],standalone:!0,features:[t.jDz],decls:25,vars:9,consts:[[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","f-s-16 f-w-600",4,"matHeaderCellDef"],["mat-cell","","class","f-s-14",4,"matCellDef"],["matColumnDef","advisory_id"],["matColumnDef","title"],["matColumnDef","content"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","mat-row",4,"matNoDataRow"],[3,"length","pageSize","pageSizeOptions"],[1,"header-container"],["mat-raised-button","","color","primary",3,"click"],["mat-header-cell","",1,"f-s-16","f-w-600"],["mat-cell","",1,"f-s-14"],["mat-cell","",1,"action-link"],["matTooltip","Edit","matTooltipPosition","above",1,"m-r-10","cursor-pointer",3,"click"],["name","edit",1,"icon-18"],["matTooltip","Delete","matTooltipPosition","above",1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card"),t.YNc(1,nt,4,0,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,at,2,0,"th",3)(7,rt,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,st,2,0,"th",3)(10,ct,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,lt,2,0,"th",3)(13,dt,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,ut,2,0,"th",3)(16,mt,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,pt,2,0,"th",3)(19,ft,5,0,"td",9),t.BQk(),t.YNc(20,_t,1,0,"tr",10)(21,ht,1,0,"tr",11)(22,gt,2,0,"div",12)(23,Tt,3,0,"tr",13),t.qZA(),t._UZ(24,"mat-paginator",14),t.qZA()()()),2&o&&(t.xp6(1),t.um2(1,n.userDetails.IsGovtAgency?1:-1),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(2),t.Q6J("length",n.totalRecords)("pageSize",10)("pageSizeOptions",t.DdM(8,Zt)))},dependencies:[q.q,m.a8,m.dn,m.dk,_.lW,A.Ou,C.gM,T.NW,Z.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,u.ez,u.O5,c.p0,T.TU,Z.JX,U.Ps,C.AV,A.Cq,h.et,h.bz]})}return e})();var w=d(8034),S=d(8525),N=d(3680);let I=(()=>{class e extends y{constructor(i){super("products",i)}getAllProduct(i){return this.get(null,"?farmer_id="+i)}getProduct(i){return this.get("",i.toString())}addProduct(i){return this.post(i)}updateProduct(i){return this.put(i,i.id.toString())}deleteProduct(i){return this.delete(i)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),P=(()=>{class e extends y{constructor(i){super("auctions",i)}getAllAuctions(){return this.get(null,"")}getAuction(i){return this.get("",i.toString())}addAuction(i){return this.post(i)}updateAuction(i){return this.put(i,i.id.toString())}deleteAuction(i){return this.delete(i)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function At(e,a){if(1&e&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.name," ")}}function vt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Product is required "),t.qZA())}function xt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Start Time is required "),t.qZA())}function bt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," End Time is required "),t.qZA())}function qt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Starting Price is required "),t.qZA())}function Ut(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Starting Price must be a valid number "),t.qZA())}let Q=(()=>{class e{constructor(i,o,n,s,l,f){this.authService=i,this.productService=o,this.auctionService=n,this.fb=s,this.dialogRef=l,this.data=f,this.currentUser=i.currentUserValue,this.auctionForm=this.fb.group({product_id:["",[r.kI.required,r.kI.pattern(/^\d+$/)]],start_time:["",r.kI.required],end_time:["",r.kI.required],starting_price:["",[r.kI.required,r.kI.pattern(/^\d+(\.\d{1,2})?$/)]],status:["active",r.kI.required]})}ngOnInit(){this.userDetails=this.authService.currentUserValue,this.productService.getAllProduct(this.currentUser.id).subscribe(i=>{console.log(i),this.products=i}),this.data&&this.auctionForm.patchValue(this.data)}submit(){if(this.auctionForm.valid){let i=this.auctionForm.value;this.adversery_Id&&this.adversery_Id>0?(i.id=this.adversery_Id,this.auctionService.updateAuction(i).subscribe(o=>{this.dialogRef.close(o)},o=>{})):(console.log("submit",this.currentUser.id),this.auctionService.addAuction(i).subscribe(o=>{this.dialogRef.close(o)},o=>{})),this.dialogRef.close(this.auctionForm.value)}}close(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(x.e),t.Y36(I),t.Y36(P),t.Y36(r.qu),t.Y36(g.so),t.Y36(g.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-auction"]],inputs:{adversery_Id:"adversery_Id"},standalone:!0,features:[t.jDz],decls:46,vars:13,consts:[["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content","",1,"content"],["appearance","outline",1,"w-100"],["formControlName","product_id","placeholder","Select Product"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","start_time","placeholder","Select Start Time",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","end_time","placeholder","Select End Time",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","starting_price","type","number","placeholder","Enter Starting Price"],["formControlName","status"],["value","active"],["value","completed"],[1,"float-right"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-stroked-button","","color","warn",1,"m-l-8",3,"click"],[3,"value"]],template:function(o,n){if(1&o&&(t.TgZ(0,"h2",0)(1,"strong"),t._uU(2),t.qZA()(),t.TgZ(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Products"),t.qZA(),t.TgZ(8,"mat-select",4),t.YNc(9,At,2,2,"mat-option",5),t.qZA(),t.YNc(10,vt,2,0,"mat-error",6),t.qZA(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Start Time"),t.qZA(),t._UZ(14,"input",7)(15,"mat-datepicker-toggle",8)(16,"mat-datepicker",null,9),t.YNc(18,xt,2,0,"mat-error",6),t.qZA(),t.TgZ(19,"mat-form-field",3)(20,"mat-label"),t._uU(21,"End Time"),t.qZA(),t._UZ(22,"input",10)(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,11),t.YNc(26,bt,2,0,"mat-error",6),t.qZA(),t.TgZ(27,"mat-form-field",3)(28,"mat-label"),t._uU(29,"Starting Price"),t.qZA(),t._UZ(30,"input",12),t.YNc(31,qt,2,0,"mat-error",6)(32,Ut,2,0,"mat-error",6),t.qZA(),t.TgZ(33,"mat-form-field",3)(34,"mat-label"),t._uU(35,"Status"),t.qZA(),t.TgZ(36,"mat-select",13)(37,"mat-option",14),t._uU(38,"Active"),t.qZA(),t.TgZ(39,"mat-option",15),t._uU(40,"Completed"),t.qZA()()(),t.TgZ(41,"div",16)(42,"button",17),t.NdJ("click",function(){return n.submit()}),t._uU(43,"Save"),t.qZA(),t.TgZ(44,"button",18),t.NdJ("click",function(){return n.close()}),t._uU(45,"Cancel"),t.qZA()()()()),2&o){const s=t.MAs(17),l=t.MAs(25);let f,D,B,z,H;t.xp6(2),t.Oqu(n.data?"Edit Auction":"Add Auction"),t.xp6(1),t.Q6J("formGroup",n.auctionForm),t.xp6(6),t.Q6J("ngForOf",n.products),t.xp6(1),t.Q6J("ngIf",null==(f=n.auctionForm.get("product_id"))?null:f.hasError("required")),t.xp6(4),t.Q6J("matDatepicker",s),t.xp6(1),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",null==(D=n.auctionForm.get("start_time"))?null:D.hasError("required")),t.xp6(4),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(3),t.Q6J("ngIf",null==(B=n.auctionForm.get("end_time"))?null:B.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(z=n.auctionForm.get("starting_price"))?null:z.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(H=n.auctionForm.get("starting_price"))?null:H.hasError("pattern")),t.xp6(10),t.Q6J("disabled",!n.auctionForm.valid)}},dependencies:[u.ez,u.sg,u.O5,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,p.lN,p.KE,p.hX,p.TO,p.R9,v.c,v.Nt,w.FA,w.Mq,w.hl,w.nW,_.ot,_.lW,S.LD,S.gD,N.ey,N.XK]})}return e})();function yt(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"mat-card-header")(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.AddAuction())}),t._uU(3,"Add Auction"),t.qZA()()()}}function Nt(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"ID"),t.qZA())}function Dt(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.id)}}function kt(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Product ID"),t.qZA())}function wt(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.product_id)}}function St(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Start Time"),t.qZA())}function It(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,i.start_time,"short"))}}function Pt(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"End Time"),t.qZA())}function Ft(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,i.end_time,"short"))}}function Yt(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Starting Price"),t.qZA())}function Jt(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,i.starting_price))}}function Rt(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Status"),t.qZA())}function Qt(e,a){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.status)}}function Et(e,a){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Action"),t.qZA())}function Lt(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"a",25),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().$implicit,s=t.oxw();return t.KtG(s.EditAuction(n))}),t._UZ(1,"i-tabler",26),t.qZA()}}const Ot=e=>["/GullBuilders/live",e];function Mt(e,a){if(1&e&&(t.TgZ(0,"td",21),t.YNc(1,Lt,2,0,"a",22),t.TgZ(2,"a",23),t._UZ(3,"i-tabler",24),t.qZA()()),2&e){const i=a.$implicit,o=t.oxw();t.xp6(1),t.um2(1,o.userDetails.IsFarmer?1:-1),t.xp6(1),t.Q6J("routerLink",t.VKq(2,Ot,i.id))}}function Bt(e,a){1&e&&t._UZ(0,"tr",27)}function zt(e,a){1&e&&t._UZ(0,"tr",28)}function Ht(e,a){1&e&&(t.TgZ(0,"div",29),t._UZ(1,"mat-spinner"),t.qZA())}function Gt(e,a){1&e&&(t.TgZ(0,"tr",30)(1,"td",31),t._uU(2,"No data available."),t.qZA()())}const $t=()=>[10,25,50];let jt=(()=>{class e{constructor(i,o,n,s){this.auctionService=i,this.authService=o,this.dialog=n,this.changeDetection=s,this.displayedColumns=["product_id","start_time","end_time","starting_price","status","action"],this.dataSource=[],this.totalRecords=0,this.loading=!1,this.auctionsData=[]}ngOnInit(){this.fetchTableData(),this.userDetails=this.authService.currentUserValue}fetchTableData(){this.loading=!0,this.auctionService.getAllAuctions().subscribe(i=>{console.log(i),this.dataSource=i,i&&(this.totalRecords=i.length)})}AddAuction(){this.dialog.open(Q,{width:"680px"}).afterClosed().subscribe({next:o=>{o&&this.fetchTableData()}})}EditAuction(i){const o=this.dialog.open(Q,{data:i,width:"680px"});o.componentInstance.adversery_Id=i.id,o.afterClosed().subscribe({next:n=>{n&&this.fetchTableData()}})}qrCode(i){}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(P),t.Y36(x.e),t.Y36(g.uw),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-live-auction"]],standalone:!0,features:[t.jDz],decls:31,vars:9,consts:[[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","f-s-16 f-w-600",4,"matHeaderCellDef"],["mat-cell","","class","f-s-14",4,"matCellDef"],["matColumnDef","product_id"],["matColumnDef","start_time"],["matColumnDef","end_time"],["matColumnDef","starting_price"],["matColumnDef","status"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","mat-row",4,"matNoDataRow"],[3,"length","pageSize","pageSizeOptions"],[1,"header-container"],["mat-raised-button","","color","primary",3,"click"],["mat-header-cell","",1,"f-s-16","f-w-600"],["mat-cell","",1,"f-s-14"],["mat-cell","",1,"action-link"],["class","m-r-10 cursor-pointer","matTooltip","Edit","matTooltipPosition","above"],["matTooltip","Auction Details","matTooltipPosition","above",1,"m-r-10","cursor-pointer",3,"routerLink"],["name","info-circle",1,"icon-18"],["matTooltip","Edit","matTooltipPosition","above",1,"m-r-10","cursor-pointer",3,"click"],["name","edit",1,"icon-18"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],[1,"mat-row"],["colspan","7",1,"mat-cell"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card"),t.YNc(1,yt,4,0,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,Nt,2,0,"th",3)(7,Dt,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,kt,2,0,"th",3)(10,wt,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,St,2,0,"th",3)(13,It,3,4,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,Pt,2,0,"th",3)(16,Ft,3,4,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,Yt,2,0,"th",3)(19,Jt,3,3,"td",4),t.BQk(),t.ynx(20,9),t.YNc(21,Rt,2,0,"th",3)(22,Qt,2,1,"td",4),t.BQk(),t.ynx(23,10),t.YNc(24,Et,2,0,"th",3)(25,Mt,4,4,"td",11),t.BQk(),t.YNc(26,Bt,1,0,"tr",12)(27,zt,1,0,"tr",13)(28,Ht,2,0,"div",14)(29,Gt,3,0,"tr",15),t.qZA(),t._UZ(30,"mat-paginator",16),t.qZA()()()),2&o&&(t.xp6(1),t.um2(1,n.userDetails.IsFarmer?1:-1),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(2),t.Q6J("length",n.totalRecords)("pageSize",10)("pageSizeOptions",t.DdM(8,$t)))},dependencies:[q.q,m.a8,m.dn,m.dk,_.lW,A.Ou,C.gM,T.NW,Z.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,u.ez,u.O5,u.H9,u.uU,c.p0,T.TU,Z.JX,U.Ps,C.AV,A.Cq,h.et,h.bz,k.Bz,k.rH]})}return e})();function Vt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Product name is required "),t.qZA())}function Wt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Product name cannot exceed 255 characters "),t.qZA())}function Xt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Base price is required "),t.qZA())}function Kt(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Quantity is required "),t.qZA())}let E=(()=>{class e{constructor(i,o,n,s,l){this.fb=i,this.dialogRef=o,this.authService=n,this.productService=s,this.data=l,this.currentUser=n.currentUserValue,this.productForm=this.fb.group({name:["",[r.kI.required,r.kI.maxLength(255)]],description:[""],farmer_id:["",[r.kI.required,r.kI.pattern(/^\d+$/)]],base_price:["",[r.kI.required,r.kI.pattern(/^\d+(\.\d{1,2})?$/)]],quantity:["",[r.kI.required,r.kI.pattern(/^\d+$/)]],status:["available",r.kI.required]})}ngOnInit(){this.data&&this.productForm.patchValue(this.data)}submit(){if(this.productForm.valid){let i=this.productForm.value;this.adversery_Id&&this.adversery_Id>0?(i.id=this.adversery_Id,this.productService.updateProduct(i).subscribe(o=>{this.dialogRef.close(o)},o=>{})):(console.log("submit",this.currentUser.id),i.farmer_id=this.currentUser.id,this.productService.addProduct(i).subscribe(o=>{this.dialogRef.close(o)},o=>{})),this.dialogRef.close(this.productForm.value)}}close(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(g.so),t.Y36(x.e),t.Y36(I),t.Y36(g.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-product"]],inputs:{adversery_Id:"adversery_Id"},standalone:!0,features:[t.jDz],decls:40,vars:7,consts:[["mat-dialog-title","",1,"f-w-500","m-b-24"],[3,"formGroup"],["mat-dialog-content","",1,"content"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name","placeholder","Enter product name"],[4,"ngIf"],["matInput","","formControlName","description","rows","3","placeholder","Enter description"],["matInput","","formControlName","base_price","type","number","step","0.01","placeholder","Enter base price"],["matInput","","formControlName","quantity","type","number","placeholder","Enter quantity"],["formControlName","status"],["value","available"],["value","sold"],["value","unlisted"],[1,"float-right"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-stroked-button","","color","warn",1,"m-l-8",3,"click"]],template:function(o,n){if(1&o&&(t.TgZ(0,"h2",0)(1,"strong"),t._uU(2),t.qZA()(),t.TgZ(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Product Name"),t.qZA(),t._UZ(8,"input",4),t.YNc(9,Vt,2,0,"mat-error",5)(10,Wt,2,0,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Description"),t.qZA(),t._UZ(14,"textarea",6),t.qZA(),t.TgZ(15,"mat-form-field",3)(16,"mat-label"),t._uU(17,"Base Price"),t.qZA(),t._UZ(18,"input",7),t.YNc(19,Xt,2,0,"mat-error",5),t.qZA(),t.TgZ(20,"mat-form-field",3)(21,"mat-label"),t._uU(22,"Quantity"),t.qZA(),t._UZ(23,"input",8),t.YNc(24,Kt,2,0,"mat-error",5),t.qZA(),t.TgZ(25,"mat-form-field",3)(26,"mat-label"),t._uU(27,"Status"),t.qZA(),t.TgZ(28,"mat-select",9)(29,"mat-option",10),t._uU(30,"Available"),t.qZA(),t.TgZ(31,"mat-option",11),t._uU(32,"Sold"),t.qZA(),t.TgZ(33,"mat-option",12),t._uU(34,"Unlisted"),t.qZA()()(),t.TgZ(35,"div",13)(36,"button",14),t.NdJ("click",function(){return n.submit()}),t._uU(37," Save "),t.qZA(),t.TgZ(38,"button",15),t.NdJ("click",function(){return n.close()}),t._uU(39," Cancel "),t.qZA()()()()),2&o){let s,l,f,D;t.xp6(2),t.Oqu(n.data?"Edit Product":"Add Product"),t.xp6(1),t.Q6J("formGroup",n.productForm),t.xp6(6),t.Q6J("ngIf",null==(s=n.productForm.get("name"))?null:s.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(l=n.productForm.get("name"))?null:l.hasError("maxlength")),t.xp6(9),t.Q6J("ngIf",null==(f=n.productForm.get("base_price"))?null:f.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(D=n.productForm.get("quantity"))?null:D.hasError("required")),t.xp6(12),t.Q6J("disabled",!n.productForm.valid)}},dependencies:[r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,p.lN,p.KE,p.hX,p.TO,v.c,v.Nt,_.ot,_.lW,S.LD,S.gD,N.ey,u.O5]})}return e})();function te(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"mat-card-header")(1,"div",18)(2,"button",19),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.AddProduct())}),t._uU(3,"Add Product"),t.qZA()()()}}function ee(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"ID"),t.qZA())}function ie(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.id)}}function oe(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Name"),t.qZA())}function ne(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.name)}}function ae(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Description"),t.qZA())}function re(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.description)}}function se(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Farmer ID"),t.qZA())}function ce(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.farmer_id)}}function le(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Base Price"),t.qZA())}function de(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.base_price)}}function ue(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Quantity"),t.qZA())}function me(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.quantity)}}function pe(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Status"),t.qZA())}function fe(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.status)}}function _e(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Action"),t.qZA())}function he(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"td",22)(1,"a",23),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.EditProduct(s))}),t._UZ(2,"i-tabler",24),t.qZA(),t.TgZ(3,"a",25),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.DeleteProduct(s))}),t._UZ(4,"i-tabler",26),t.qZA()()}}function ge(e,a){1&e&&t._UZ(0,"tr",27)}function Te(e,a){1&e&&t._UZ(0,"tr",28)}function Ze(e,a){1&e&&(t.TgZ(0,"div",29),t._UZ(1,"mat-spinner"),t.qZA())}function Ce(e,a){1&e&&(t.TgZ(0,"tr",30)(1,"td",31),t._uU(2,"No data available."),t.qZA()())}const Ae=()=>[10,25,50];let ve=(()=>{class e{constructor(i,o,n,s){this.authService=i,this.dialog=o,this.changeDetection=n,this.productService=s,this.displayedColumns=["name","description","base_price","quantity","status"],this.dataSource=[],this.totalRecords=0,this.loading=!1,this.productsData=[],this.currentUser=i.currentUserValue}ngOnInit(){this.fetchTableData(),this.userDetails=this.authService.currentUserValue,this.userDetails.IsFarmer&&(this.displayedColumns=["name","description","base_price","quantity","status","action"])}fetchTableData(){this.loading=!0,console.log("getAllProduct",this.currentUser.id),this.productService.getAllProduct(this.currentUser.id).subscribe(i=>{console.log(i),this.dataSource=i,i&&(this.totalRecords=i.length)})}AddProduct(){this.dialog.open(E,{width:"680px"}).afterClosed().subscribe({next:o=>{o&&this.fetchTableData()}})}EditProduct(i){const o=this.dialog.open(E,{data:i,width:"680px"});o.componentInstance.adversery_Id=i.id,o.afterClosed().subscribe({next:n=>{n&&this.fetchTableData()}})}DeleteProduct(i){confirm("Are you sure you want to delete this product?")&&(console.log(i),this.productService.deleteProduct(i.id).subscribe(n=>{},n=>{}),this.fetchTableData())}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(x.e),t.Y36(g.uw),t.Y36(t.sBO),t.Y36(I))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:34,vars:9,consts:[[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","f-s-16 f-w-600",4,"matHeaderCellDef"],["mat-cell","","class","f-s-14",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","farmer_id"],["matColumnDef","base_price"],["matColumnDef","quantity"],["matColumnDef","status"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","mat-row",4,"matNoDataRow"],[3,"length","pageSize","pageSizeOptions"],[1,"header-container"],["mat-raised-button","","color","primary",3,"click"],["mat-header-cell","",1,"f-s-16","f-w-600"],["mat-cell","",1,"f-s-14"],["mat-cell","",1,"action-link"],["matTooltip","Edit","matTooltipPosition","above",1,"m-r-10","cursor-pointer",3,"click"],["name","edit",1,"icon-18"],["matTooltip","Delete","matTooltipPosition","above",1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],[1,"mat-row"],["colspan","8",1,"mat-cell"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card"),t.YNc(1,te,4,0,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,ee,2,0,"th",3)(7,ie,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,oe,2,0,"th",3)(10,ne,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,ae,2,0,"th",3)(13,re,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,se,2,0,"th",3)(16,ce,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,le,2,0,"th",3)(19,de,2,1,"td",4),t.BQk(),t.ynx(20,9),t.YNc(21,ue,2,0,"th",3)(22,me,2,1,"td",4),t.BQk(),t.ynx(23,10),t.YNc(24,pe,2,0,"th",3)(25,fe,2,1,"td",4),t.BQk(),t.ynx(26,11),t.YNc(27,_e,2,0,"th",3)(28,he,5,0,"td",12),t.BQk(),t.YNc(29,ge,1,0,"tr",13)(30,Te,1,0,"tr",14)(31,Ze,2,0,"div",15)(32,Ce,3,0,"tr",16),t.qZA(),t._UZ(33,"mat-paginator",17),t.qZA()()()),2&o&&(t.xp6(1),t.um2(1,n.userDetails.IsFarmer?1:-1),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(2),t.Q6J("length",n.totalRecords)("pageSize",10)("pageSizeOptions",t.DdM(8,Ae)))},dependencies:[q.q,m.a8,m.dn,m.dk,_.lW,A.Ou,C.gM,T.NW,Z.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,u.ez,u.O5,c.p0,T.TU,Z.JX,U.Ps,C.AV,A.Cq,h.et,h.bz]})}return e})(),L=(()=>{class e extends y{constructor(i){super("educational-content",i)}getAllEducationalcontent(){return this.get(null,"")}addEducationalcontent(i){return this.post(i)}updateEducationalcontent(i){return this.put(i,i.id.toString())}deleteEducationalcontent(i){return this.delete(i)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xe(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Title is required "),t.qZA())}function be(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Title cannot exceed 255 characters "),t.qZA())}function qe(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Content is required "),t.qZA())}let O=(()=>{class e{constructor(i,o,n,s,l){this.fb=i,this.dialogRef=o,this.educationalContentService=n,this.authService=s,this.data=l,this.currentUser=s.currentUserValue,this.contentForm=this.fb.group({title:["",[r.kI.required,r.kI.maxLength(255)]],content:["",[r.kI.required]]}),l&&this.contentForm.patchValue(l)}ngOnInit(){this.data&&this.contentForm.patchValue(this.data)}submit(){if(this.contentForm.valid){let i=this.contentForm.value;i.advisory_id=this.currentUser.id,this.adversery_Id&&this.adversery_Id>0?this.educationalContentService.updateEducationalcontent(i).subscribe(o=>{this.dialogRef.close(o)},o=>{}):this.educationalContentService.addEducationalcontent(i).subscribe(o=>{this.dialogRef.close(o)},o=>{})}}close(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(g.so),t.Y36(L),t.Y36(x.e),t.Y36(g.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-content"]],inputs:{adversery_Id:"adversery_Id"},standalone:!0,features:[t.jDz],decls:21,vars:6,consts:[["mat-dialog-title","",1,"f-w-500","m-b-24"],[3,"formGroup"],["mat-dialog-content","",1,"content"],["appearance","outline",1,"w-100"],["matInput","","formControlName","title","placeholder","Enter title"],[4,"ngIf"],["matInput","","formControlName","content","rows","5","placeholder","Enter content"],[1,"float-right"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-stroked-button","","color","warn",1,"m-l-8",3,"click"]],template:function(o,n){if(1&o&&(t.TgZ(0,"h2",0)(1,"strong"),t._uU(2),t.qZA()(),t.TgZ(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"Title"),t.qZA(),t._UZ(8,"input",4),t.YNc(9,xe,2,0,"mat-error",5)(10,be,2,0,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Content"),t.qZA(),t._UZ(14,"textarea",6),t.YNc(15,qe,2,0,"mat-error",5),t.qZA(),t.TgZ(16,"div",7)(17,"button",8),t.NdJ("click",function(){return n.submit()}),t._uU(18," Save "),t.qZA(),t.TgZ(19,"button",9),t.NdJ("click",function(){return n.close()}),t._uU(20," Cancel "),t.qZA()()()()),2&o){let s,l,f;t.xp6(2),t.Oqu(n.data?"Edit Educational Content":"Add Educational Content"),t.xp6(1),t.Q6J("formGroup",n.contentForm),t.xp6(6),t.Q6J("ngIf",null==(s=n.contentForm.get("title"))?null:s.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(l=n.contentForm.get("title"))?null:l.hasError("maxLength")),t.xp6(5),t.Q6J("ngIf",null==(f=n.contentForm.get("content"))?null:f.hasError("required")),t.xp6(2),t.Q6J("disabled",!n.contentForm.valid)}},dependencies:[r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.lN,p.KE,p.hX,p.TO,v.c,v.Nt,_.ot,_.lW,u.ez,u.O5]})}return e})();class ye{constructor(){this.items=[]}}function Ne(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"mat-card-header")(1,"div",14)(2,"button",15),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.AddContent())}),t._uU(3,"Add Educational Content"),t.qZA()()()}}function De(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Advisory ID"),t.qZA())}function ke(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.advisory_id)}}function we(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Title"),t.qZA())}function Se(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.title)}}function Ie(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Content"),t.qZA())}function Pe(e,a){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.content)}}function Fe(e,a){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Action"),t.qZA())}function Ye(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"td",18)(1,"a",19),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.EditContent(s))}),t._UZ(2,"i-tabler",20),t.qZA(),t.TgZ(3,"a",21),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw();return t.KtG(l.DeleteContent(s))}),t._UZ(4,"i-tabler",22),t.qZA()()}}function Je(e,a){1&e&&t._UZ(0,"tr",23)}function Re(e,a){1&e&&t._UZ(0,"tr",24)}function Qe(e,a){1&e&&(t.TgZ(0,"div",25),t._UZ(1,"mat-spinner"),t.qZA())}function Ee(e,a){1&e&&(t.TgZ(0,"tr",26)(1,"td",27),t._uU(2,"No data available."),t.qZA()())}const Le=()=>[10,25,50];let Oe=(()=>{class e{constructor(i,o,n,s){this.dialog=i,this.changeDetection=o,this.educationalContentService=n,this.authService=s,this.displayedColumns=["advisory_id","title","content"],this.dataSource=[],this.totalRecords=0,this.loading=!1,this.educationalContentData=new ye,this.currentUser=s.currentUserValue}ngOnInit(){this.fetchTableData(),this.userDetails=this.authService.currentUserValue,this.userDetails.IsGovtAgency&&(this.displayedColumns=["advisory_id","title","content","action"])}ngAfterViewInit(){this.fetchTableData()}fetchTableData(){this.loading=!0,this.educationalContentService.getAllEducationalcontent().subscribe(i=>{console.log(i),this.dataSource=i,i&&(this.totalRecords=i.length)})}AddContent(){this.dialog.open(O,{width:"680px"}).afterClosed().subscribe({next:o=>{o&&this.fetchTableData()}})}EditContent(i){const o=this.dialog.open(O,{data:i,width:"680px"});o.componentInstance.adversery_Id=i.id,o.afterClosed().subscribe({next:n=>{n&&this.fetchTableData()}})}DeleteContent(i){confirm("Are you sure you want to delete this content?")&&(this.educationalContentService.deleteEducationalcontent(i.id).subscribe(n=>{},n=>{}),this.fetchTableData())}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(g.uw),t.Y36(t.sBO),t.Y36(L),t.Y36(x.e))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-content"]],standalone:!0,features:[t.jDz],decls:22,vars:9,consts:[[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","advisory_id"],["mat-header-cell","","class","f-s-16 f-w-600",4,"matHeaderCellDef"],["mat-cell","","class","f-s-14",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","content"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],[1,"header-container"],["mat-raised-button","","color","primary",3,"click"],["mat-header-cell","",1,"f-s-16","f-w-600"],["mat-cell","",1,"f-s-14"],["mat-cell","",1,"action-link"],["matTooltip","Edit","matTooltipPosition","above",1,"m-r-10","cursor-pointer",3,"click"],["name","edit",1,"icon-18"],["matTooltip","Delete","matTooltipPosition","above",1,"m-r-10","cursor-pointer",3,"click"],["name","trash",1,"icon-18"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card"),t.YNc(1,Ne,4,0,"mat-card-header"),t.TgZ(2,"mat-card-content")(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,De,2,0,"th",3)(7,ke,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,we,2,0,"th",3)(10,Se,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,Ie,2,0,"th",3)(13,Pe,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,Fe,2,0,"th",3)(16,Ye,5,0,"td",8),t.BQk(),t.YNc(17,Je,1,0,"tr",9)(18,Re,1,0,"tr",10)(19,Qe,2,0,"div",11)(20,Ee,3,0,"tr",12),t.qZA(),t._UZ(21,"mat-paginator",13),t.qZA()()()),2&o&&(t.xp6(1),t.um2(1,n.userDetails.IsGovtAgency?1:-1),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(2),t.Q6J("length",n.totalRecords)("pageSize",10)("pageSizeOptions",t.DdM(8,Le)))},dependencies:[q.q,m.a8,m.dn,m.dk,_.lW,A.Ou,C.gM,T.NW,Z.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,u.ez,u.O5,c.p0,T.TU,Z.JX,U.Ps,C.AV,A.Cq,h.et,h.bz]})}return e})(),Me=(()=>{class e extends y{constructor(i){super("chat-messages",i)}getchat(i){return this.get(null,"auction/"+i)}sendMessage(i){return this.post(i)}getBids(i){return this.get(null,"~bids/auction/"+i)}completeBids(i){return this.put({},"~auctions/complete/"+i)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var M=d(9038);function Be(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Add Bid"),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"form",6),t.NdJ("ngSubmit",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.sendMessage())}),t.TgZ(6,"mat-form-field",7),t._UZ(7,"input",10),t.qZA(),t.TgZ(8,"button",9),t._uU(9," Send "),t.qZA()()()()}if(2&e){const i=t.oxw();t.xp6(5),t.Q6J("formGroup",i.bidForm),t.xp6(3),t.Q6J("disabled",i.chatForm.invalid)}}function ze(e,a){if(1&e&&(t.TgZ(0,"div",14)(1,"li"),t._uU(2),t.qZA()()),2&e){const i=a.$implicit;t.xp6(2),t.Oqu(i.amount)}}function He(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div"),t.YNc(1,ze,3,1,"div",12),t._UZ(2,"br"),t.TgZ(3,"button",13),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(2);return t.KtG(n.completeBid())}),t._uU(4," Complete Bid "),t.qZA()()}if(2&e){const i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.biddingPricesData)}}function Ge(e,a){if(1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Top Biddings"),t.qZA()(),t.TgZ(4,"mat-card-content"),t.YNc(5,He,5,1,"div",11),t.qZA()()),2&e){const i=t.oxw();t.xp6(5),t.Q6J("ngIf",i.biddingPricesData&&i.biddingPricesData.length>0)}}function $e(e,a){if(1&e&&(t.TgZ(0,"strong"),t._uU(1),t.qZA()),2&e){const i=t.oxw().$implicit;t.xp6(1),t.AsE(" User ",i.user_id,":",i.message," ")}}function je(e,a){if(1&e&&(t.TgZ(0,"strong"),t._uU(1),t.qZA()),2&e){const i=t.oxw().$implicit;t.xp6(1),t.hij(" You :",i.message," ")}}const Ve=(e,a)=>({"chat-right":e,"chat-left":a});function We(e,a){if(1&e&&(t.TgZ(0,"mat-list-item",15)(1,"div",16),t.YNc(2,$e,2,2,"strong",11)(3,je,2,1,"strong",11),t.qZA()()),2&e){const i=a.$implicit,o=t.oxw();t.Q6J("ngClass",t.WLB(3,Ve,i.user_id===o.userDetails.id,i.user_id!==o.userDetails.id)),t.xp6(2),t.Q6J("ngIf",i.user_id!==o.userDetails.id),t.xp6(1),t.Q6J("ngIf",i.user_id===o.userDetails.id)}}const Xe=[{path:"",component:Y},{path:"notifications",component:Ct},{path:"auction",component:jt},{path:"products",component:ve},{path:"content",component:Oe},{path:"live/:id",component:(()=>{class e{constructor(i,o,n,s,l,f){this.auctionService=i,this.productService=o,this.route=n,this.chatService=s,this.authService=l,this.fb=f,this.chatMessages=[],this.biddingPricesData=[],this.chatForm=this.fb.group({message:["",[r.kI.required]]}),this.bidForm=this.fb.group({price:["",[r.kI.required]]})}fetchMessagesData(){this.chatService.getchat(this.auctionId).subscribe(i=>{this.chatMessages=i,console.log(i)}),this.chatService.getBids(this.auctionId).subscribe(i=>{this.biddingPricesData=i,console.log(i)})}ngOnInit(){this.userDetails=this.authService.currentUserValue,this.auctionId=+this.route.snapshot.paramMap.get("id"),this.fetchMessagesData(),this.chatFetchInterval=setInterval(()=>{this.fetchMessagesData()},5e3),this.auctionService.getAuction(this.auctionId).subscribe(i=>{this.productId=i.product_id,this.productService.getProduct(this.productId).subscribe(o=>{console.log(o),this.product=o})})}sendMessage(){const i=this.chatForm.get("message")?.value;i.trim()&&this.chatService.sendMessage({auction_id:this.auctionId,user_id:this.userDetails.id,message:i}).subscribe(o=>{console.log(o),this.chatMessages.push({user_id:this.userDetails.id,message:i}),this.chatForm.reset()})}completeBid(){this.chatService.completeBids(this.auctionId).subscribe(i=>{console.log(i),alert("Completed successfully")})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(P),t.Y36(I),t.Y36(k.gz),t.Y36(Me),t.Y36(x.e),t.Y36(r.qu))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-live"]],standalone:!0,features:[t.jDz],decls:46,vars:11,consts:[[1,"row"],[1,"col-md-4"],[1,"col-12"],[1,"col-md-8"],[1,"chat-container"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"chat-input",3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","formControlName","message","placeholder","Type your message..."],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","formControlName","price","placeholder","Enter your Bid"],[4,"ngIf"],["class","notification-item",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[1,"notification-item"],[3,"ngClass"],["mat-line",""]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",2)(4,"mat-card")(5,"mat-card-header")(6,"mat-card-title"),t._uU(7),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"p")(10,"strong"),t._uU(11,"Description:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p")(14,"strong"),t._uU(15,"Farmer ID:"),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"p")(18,"strong"),t._uU(19,"Base Price:"),t.qZA(),t._uU(20),t.qZA(),t.TgZ(21,"p")(22,"strong"),t._uU(23,"Quantity:"),t.qZA(),t._uU(24),t.qZA(),t.TgZ(25,"p")(26,"strong"),t._uU(27,"Status:"),t.qZA(),t._uU(28),t.qZA()()()(),t.TgZ(29,"div",2),t.YNc(30,Be,10,2,"mat-card")(31,Ge,6,1,"mat-card"),t.qZA()()(),t.TgZ(32,"div",3)(33,"mat-card")(34,"mat-card-header")(35,"mat-card-title"),t._uU(36,"Live Auction"),t.qZA()(),t.TgZ(37,"mat-card-content")(38,"div",4)(39,"mat-list"),t.YNc(40,We,4,6,"mat-list-item",5),t.qZA(),t.TgZ(41,"form",6),t.NdJ("ngSubmit",function(){return n.sendMessage()}),t.TgZ(42,"mat-form-field",7),t._UZ(43,"input",8),t.qZA(),t.TgZ(44,"button",9),t._uU(45," Send "),t.qZA()()()()()()()),2&o&&(t.xp6(7),t.Oqu(n.product.name),t.xp6(5),t.hij(" ",n.product.description,""),t.xp6(4),t.hij(" ",n.product.farmer_id,""),t.xp6(4),t.hij(" ",n.product.base_price,""),t.xp6(4),t.hij(" ",n.product.quantity,""),t.xp6(4),t.hij(" ",n.product.status,""),t.xp6(2),t.um2(30,n.userDetails.IsVendor?30:-1),t.xp6(1),t.um2(31,n.userDetails.IsFarmer?31:-1),t.xp6(9),t.Q6J("ngForOf",n.chatMessages),t.xp6(1),t.Q6J("formGroup",n.chatForm),t.xp6(3),t.Q6J("disabled",n.chatForm.invalid))},dependencies:[q.q,p.KE,v.Nt,m.a8,m.dn,m.dk,m.n5,N.X2,M.i$,M.Tg,_.lW,u.ez,u.mk,u.sg,u.O5,c.p0,T.TU,Z.JX,U.Ps,C.AV,A.Cq,h.et,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:400px}mat-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;border:1px solid #e0e0e0;margin-bottom:10px;padding:10px}.chat-input[_ngcontent-%COMP%]{display:flex;gap:10px}.chat-input[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1}mat-list-item[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{display:inline-block;padding:5px 10px;background-color:#f1f1f1;border-radius:5px;max-width:80%}.chat-right[_ngcontent-%COMP%]{justify-content:flex-end;text-align-last:right}.chat-right[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;text-align:right}.chat-left[_ngcontent-%COMP%]{justify-content:flex-start}.chat-left[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{background-color:#e0e0e0;text-align:left}"]})}return e})()}];var Ke=d(9441);let ti=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[u.ez,q.q,N.XK,r.u5,k.Bz.forChild(Xe),Y,h.et.pick(Ke)]})}return e})()}}]);